import{d as X,m as r,K as o,L as ot,a as d,c as p,b as s,t as i,n as I,u as e,H as S,f as B,F as $,x as k,y as b,z as E,g as j,k as lt,M as it,r as A,U as y,p as ut,R as J,q as rt,s as mt,v as dt,w as vt,A as Q,B as ct,_ as pt,C as ft,D as bt,E as St,G as V,P as F}from"./index-60531247.js";import{u as gt,_ as ht}from"./investment.store-f57f62bd.js";const It={class:"col-xl-4 col-lg-6 col-sm-12"},Et={class:"card"},Ct={class:"card-header border-0 pb-0 justify-content-start align-items-stretch gap-2"},Nt={class:"d-flex flex-column justify-content-between"},wt={class:"card-title fw-bold"},Pt={class:"d-flex gap-2 align-items-center"},At={class:"mb-0"},yt={class:"card-body pt-0"},$t={class:"text-white mb-2 d-flex gap-2 align-items-center"},Mt={class:"ms-3 fs-5 avatar-group1"},Dt=["src","alt"],_t={class:"text-white mb-2"},kt={class:"ms-3 fw-bold text-primary fs-5"},Tt={class:"text-white mb-2"},Lt={class:"text-center mb-0"},Ut={class:"d-flex gap-2 mt-2"},Ht={key:0,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Rt=["disabled"],Ot={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Bt=["disabled"],Vt={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Ft=["disabled"],jt={key:1,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},qt=["disabled"],Gt=X({__name:"PurchasedPackageCardComponent",props:{investment:{}},setup(q){const m=q,C=r(()=>{var t;return(((t=m.investment.plan)==null?void 0:t.potentialPercentageProfit)||250)*m.investment.amount/100}),M=r(()=>m.investment.runTime+(m.investment.status===o.RUNNING?new Date().getTime()-new Date(m.investment.resumeTime).getTime():0)),h=r(()=>C.value*M.value/m.investment.expectedRunTime+m.investment.extraProfit),f=r(()=>m.investment.expectedRunTime-M.value),T=r(()=>Math.floor(f.value/(1e3*60*60*24))),L=r(()=>Math.floor(f.value%(1e3*60*60*24)/(1e3*60*60))),U=r(()=>Math.floor(f.value%(1e3*60*60)/(1e3*60))),H=r(()=>Math.floor(f.value%(1e3*60)/1e3));return(t,l)=>{var N,D;const v=ot("vue-countdown");return d(),p("div",It,[s("div",Et,[s("div",Ct,[s("div",Nt,[s("h2",wt,i(((N=t.investment.plan)==null?void 0:N.name)||"Unknown"),1),s("div",Pt,[s("p",At,i(((D=t.investment.plan)==null?void 0:D.engine)||"Unknown"),1),s("span",{class:I(`badge light badge-${("Helpers"in t?t.Helpers:e(S)).toStatus(t.investment.status)}`)},i(("Helpers"in t?t.Helpers:e(S)).toTitleCase(t.investment.status)),3)])])]),l[7]||(l[7]=s("hr",{class:"mt-2"},null,-1)),s("div",yt,[s("ul",null,[s("li",$t,[l[0]||(l[0]=B(" Assets: ")),s("div",Mt,[(d(!0),p($,null,k(t.investment.assets.slice().reverse(),c=>(d(),p("a",{key:c._id,class:"avatar-group-item1",href:"javascript: void(0);"},[s("img",{src:`/icons/crypto-svg/${c.logo}`,class:"",alt:`${c.name}`,width:"24"},null,8,Dt)]))),128))])]),s("li",_t,[l[1]||(l[1]=B(" Amount Invested: ")),s("span",kt,i(("Helpers"in t?t.Helpers:e(S)).toCurrency(t.investment.amount)),1)]),s("li",Tt,[B(i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?"Profit Received":"Earnings")+": ",1),s("span",{class:I(`ms-3 fw-bold ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?"text-warning":"text-success"}  fs-5`)},i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?("Helpers"in t?t.Helpers:e(S)).toCurrency(e(C)+t.investment.extraProfit):("Helpers"in t?t.Helpers:e(S)).toCurrency(e(h),4)),3)])]),l[6]||(l[6]=s("hr",{class:"mt-3 mb-2"},null,-1)),s("p",Lt,i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?"Mining Completed":t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?"Mining suspended, contact support for more information":"This Mining Will Complete In"),1),b(v,{time:e(f)},{default:E(({days:c,hours:w,minutes:_,seconds:P})=>[s("div",Ut,[c?(d(),p("div",Ht,[s("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED,class:I(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Days"},i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).RUNNING?c:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?0:e(T)),11,Rt),l[2]||(l[2]=s("span",{class:"fw-bold"},"Days",-1))])):j("",!0),s("div",Ot,[s("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED,class:I(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Hours"},i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).RUNNING?w:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?0:e(L)),11,Bt),l[3]||(l[3]=s("span",{class:"fw-bold"},"Hours",-1))]),s("div",Vt,[s("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED,class:I(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Minutes"},i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).RUNNING?_:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?0:e(U)),11,Ft),l[4]||(l[4]=s("span",{class:"fw-bold"},"Minutes",-1))]),c?j("",!0):(d(),p("div",jt,[s("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED,class:I(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Seconds"},i(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).RUNNING?P:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:e(o)).COMPLETED?0:e(H)),11,qt),l[5]||(l[5]=s("span",{class:"fw-bold"},"Seconds",-1))]))])]),_:1},8,["time"])])])])}}});const zt={class:"custom-tab-1"},Kt={class:"tab-content"},Yt={id:"available-packages",class:"tab-pane fade active show"},Wt={class:"row"},Jt=["onClick","disabled"],Qt={id:"running-packages",class:"tab-pane fade"},Xt={class:"row"},Zt={id:"closed-packages",class:"tab-pane fade"},xt={class:"row"},te={key:0,class:"row mt-4"},ee={class:"text-center"},se={class:"text-center"},ne={class:"error-message"},ae={class:"row mt-4"},oe={class:"mb-3 col-12"},le={class:"d-flex justify-content-between"},ie={class:"d-flex gap-2"},ue={class:"d-flex"},re={class:"fw-bold"},me={class:"d-flex"},de={class:"fw-bold"},ve={class:"error-message"},fe=X({__name:"PurchasedPackagesPage",setup(q){const m=gt(),C=r(()=>m.investments),M=r(()=>m.loaded),h=lt(),f=it(),T=r(()=>f.plans),L=r(()=>f.loaded);M.value||m.fetchAll();const U=r(()=>C.value.filter(n=>n.status!==o.COMPLETED)),H=r(()=>C.value.filter(n=>n.status===o.COMPLETED));L.value||f.fetchAll();const t=A(),l=A(),v=A(y.MAIN_BALANCE),N=n=>v.value=n,D=n=>t.value=n,c=A(!1),w=(n,a)=>{c.value=n,D(a)},_=A(!1),P=n=>_.value=n,g=ut({status:J.INFO,title:"",message:"",onConfirm:()=>{}}),Z=n=>{g.status=n.status,g.title=n.title,g.message=n.message,g.onConfirm=n.onConfirm},x=n=>{Z({status:J.INFO,title:`You are about to purchase this miner with the sum of ${S.toCurrency(l.value||0)}`,message:"Click on the confirm button to confirm this purchase.",onConfirm:async()=>{P(!1),await m.createInvestment(n)&&w(!1)}}),P(!0)},tt=rt({account:mt().required("Account is required"),amount:dt().typeError("amount is required").min(0,"amount should not be a negative value").required("amount is required").test(function(n){if(t.value&&n<t.value.minAmount)throw this.createError({message:`Amount must be at least ${t.value.minAmount}`});if(h.user&&n>h.user[v.value])throw this.createError({message:`You do not have sufficient balance in your ${S.fromCamelToTitleCase(v.value)} Account`});return!0})});return(n,a)=>{const et=ht,G=Gt,R=ct,z=pt,st=ft,nt=bt,at=St;return d(),p($,null,[s("div",zt,[a[6]||(a[6]=vt('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#available-packages" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Available</a></li><li class="nav-item"><a href="#running-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Active </a></li><li class="nav-item"><a href="#closed-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Completed </a></li></ul>',1)),s("div",Kt,[s("div",Yt,[s("div",Wt,[(d(!0),p($,null,k(e(T),u=>(d(),V(et,{plan:u,key:u._id},{default:E(()=>[s("button",{onClick:()=>w(!0,u),type:"button",class:I(`btn btn-outline-secondary w-100 mt-3 ${u.status===("PlanStatus"in n?n.PlanStatus:e(F)).ON_MAINTENANCE?"border-0":""}`),disabled:u.status===("PlanStatus"in n?n.PlanStatus:e(F)).ON_MAINTENANCE},i(u.status===("PlanStatus"in n?n.PlanStatus:e(F)).ON_MAINTENANCE?"Engine is on maintenance":"Invest"),11,Jt)]),_:2},1032,["plan"]))),128))])]),s("div",Qt,[s("div",Xt,[(d(!0),p($,null,k(e(U),u=>(d(),V(G,{investment:u,key:u._id},null,8,["investment"]))),128))])]),s("div",Zt,[s("div",xt,[(d(!0),p($,null,k(e(H),u=>(d(),V(G,{investment:u,key:u._id},null,8,["investment"]))),128))])])])]),b(nt,{"is-open":e(c),"validation-schema":e(tt),onConfirm:x,onClose:a[4]||(a[4]=()=>w(!1)),"confirm-btn-text":"Invest"},{default:E(({errors:u})=>{var K,Y,W;return[a[13]||(a[13]=s("h3",{class:"border-bottom text-dark text-center pb-3"},"MAKE INVESTMENT",-1)),b(R,{name:"planId",value:(K=e(t))==null?void 0:K._id,type:"hidden"},null,8,["value"]),e(h).user?(d(),p("div",te,[a[9]||(a[9]=s("label",{class:"form-label"},"Account",-1)),b(st,null,{default:E(()=>[b(z,{onClick:a[0]||(a[0]=()=>N(e(y).MAIN_BALANCE)),selected:e(v)===e(y).MAIN_BALANCE},{default:E(()=>[a[7]||(a[7]=s("span",{class:"d-block"},"Main Balance",-1)),s("h4",ee,i(("Helpers"in n?n.Helpers:e(S)).toCurrency(e(h).user.mainBalance)),1)]),_:1},8,["selected"]),b(z,{selected:e(v)===e(y).REFERRAL_BALANCE,onClick:a[1]||(a[1]=()=>N(e(y).REFERRAL_BALANCE))},{default:E(()=>[a[8]||(a[8]=s("span",{class:"d-block"},"Referral Balance",-1)),s("h4",se,i(("Helpers"in n?n.Helpers:e(S)).toCurrency(e(h).user.referralBalance)),1)]),_:1},8,["selected"])]),_:1}),b(R,{name:"account",modelValue:e(v),"onUpdate:modelValue":a[2]||(a[2]=O=>Q(v)?v.value=O:null),type:"hidden"},null,8,["modelValue"]),s("span",ne,i(u.account),1)])):j("",!0),s("div",ae,[s("div",oe,[s("div",le,[a[12]||(a[12]=s("label",{class:"form-label"},"Amount",-1)),s("div",ie,[s("div",ue,[a[10]||(a[10]=s("span",{class:""},"min: ",-1)),s("span",re,i(" "+((Y=e(t))==null?void 0:Y.minAmount)),1)]),s("div",me,[a[11]||(a[11]=s("span",{class:""},"max: ",-1)),s("span",de,i(" "+((W=e(t))==null?void 0:W.maxAmount)),1)])])]),b(R,{name:"amount",type:"number",placeholder:"Amount",class:"form-control",modelValue:e(l),"onUpdate:modelValue":a[3]||(a[3]=O=>Q(l)?l.value=O:null),"validate-on-input":!0},null,8,["modelValue"]),s("span",ve,i(u.amount),1)])])]}),_:1},8,["is-open","validation-schema"]),b(at,{"is-open":e(_),status:e(g).status,title:e(g).title,message:e(g).message,onConfirm:e(g).onConfirm,onClose:a[5]||(a[5]=()=>P(!1))},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{fe as default};
