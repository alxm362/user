import{d as V,r as f,o as ce,a as h,c as E,b as e,u as s,e as X,t as i,n as w,H as v,f as D,g as B,h as ue,i as Z,j as ee,k as se,l as F,m as N,U as S,p as pe,R as Q,q as me,s as fe,v as ye,w as be,F as M,x as O,y as $,z as P,A as W,B as ve,_ as _e,C as he,D as Ce,E as ge,G as R}from"./index-60531247.js";var H=(r=>(r.ACTIVE="active",r.SUSPENDED="suspended",r.ON_MAINTENANCE="on maintenance",r))(H||{}),u=(r=>(r.RUNNING="running",r.SUSPENDED="suspended",r.MARKET_OPENED="market opened",r.MARKET_CLOSED="market closed",r.TRADE_ON_HOLD="trade on hold",r.INSUFFICIENT_GAS="insufficient gas",r.COMPLETED="completed",r))(u||{});const Ee={class:"col-xl-4 col-lg-6 col-sm-12"},Ae={class:"card"},Te={class:"card-header border-0 pb-0 justify-content-start align-items-stretch gap-2"},$e={class:"media me-2 rounded-profile overflow-hidden"},we=["src"],Ne={class:"d-flex flex-column justify-content-between"},Se={class:"card-title fw-bold"},Pe={class:"d-flex gap-2 align-items-center"},De={class:"card-body pt-0"},Me={class:"text-white mb-2"},He={class:"ms-3 fw-bold text-primary fs-5"},ke={class:"text-white mb-2"},Ie={class:"text-center mb-0"},Le={class:"d-flex gap-2 mt-2"},Ue={key:0,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Oe=["disabled"],Re={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Be=["disabled"],Fe={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Ve=["disabled"],je={key:1,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},qe=["disabled"],Ge=V({__name:"CopyCardComponent",props:{copy:{}},setup(r){const o=r,d=f(0),y=f(0),b=f(0),_=f(0),C=f(0),m=setInterval(()=>{var c;const t=o.copy.runTime+(o.copy.status===u.RUNNING?new Date().getTime()-new Date(o.copy.resumeTime).getTime():0),l=t/(1e3*60*60*24);d.value=(((c=o.copy.copyTrade)==null?void 0:c.dailyPercentageProfit)||250)*l*o.copy.amount/100+o.copy.extraProfit,y.value=Math.floor(t/(1e3*60*60*24)),b.value=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),_.value=Math.floor(t%(1e3*60*60)/(1e3*60)),C.value=Math.floor(t%(1e3*60)/1e3)},1e3);return ce(()=>{clearInterval(m)}),(t,l)=>{var c,g;return h(),E("div",Ee,[e("div",Ae,[e("div",Te,[e("div",$e,[e("img",{alt:"image",width:"50",src:`${("config"in t?t.config:s(X)).imageHost}/icon/original/${(c=t.copy.copyTrade)==null?void 0:c.icon}`},null,8,we)]),e("div",Ne,[e("h2",Se,i(((g=t.copy.copyTrade)==null?void 0:g.name)||"Unknown"),1),e("div",Pe,[e("span",{class:w(`badge light badge-${("Helpers"in t?t.Helpers:s(v)).toStatus(t.copy.status)}`)},i(("Helpers"in t?t.Helpers:s(v)).toTitleCase(t.copy.status)),3)])])]),l[6]||(l[6]=e("hr",{class:"mt-2"},null,-1)),e("div",De,[e("ul",null,[e("li",Me,[l[0]||(l[0]=D(" Amount Invested: ")),e("span",He,i(("Helpers"in t?t.Helpers:s(v)).toCurrency(t.copy.amount)),1)]),e("li",ke,[D(i(t.copy.status===s(u).COMPLETED?"Amount Received":"Earnings")+": ",1),e("span",{class:w(`ms-3 fw-bold ${t.copy.status===s(u).SUSPENDED?"text-warning":"text-success"}  fs-5`)},i(t.copy.status===s(u).COMPLETED?("Helpers"in t?t.Helpers:s(v)).toCurrency(t.copy.balance):("Helpers"in t?t.Helpers:s(v)).toCurrency(s(d),4)),3)])]),l[5]||(l[5]=e("hr",{class:"mt-3 mb-2"},null,-1)),e("p",Ie,i(t.copy.status===s(u).COMPLETED?"Trade Closed":t.copy.status===s(u).SUSPENDED?"Trading suspended, contact support for more information":"Trade Running"),1),e("div",Le,[s(y)?(h(),E("div",Ue,[e("button",{disabled:t.copy.status===s(u).SUSPENDED,class:w(`btn light ${t.copy.status===s(u).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Days"},i(s(y)),11,Oe),l[1]||(l[1]=e("span",{class:"fw-bold"},"Days",-1))])):B("",!0),e("div",Re,[e("button",{disabled:t.copy.status===s(u).SUSPENDED,class:w(`btn light ${t.copy.status===s(u).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Hours"},i(s(b)),11,Be),l[2]||(l[2]=e("span",{class:"fw-bold"},"Hours",-1))]),e("div",Fe,[e("button",{disabled:t.copy.status===s(u).SUSPENDED,class:w(`btn light ${t.copy.status===s(u).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Minutes"},i(s(_)),11,Ve),l[3]||(l[3]=e("span",{class:"fw-bold"},"Minutes",-1))]),s(y)?B("",!0):(h(),E("div",je,[e("button",{disabled:t.copy.status===s(u).SUSPENDED,class:w(`btn light ${t.copy.status===s(u).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Seconds"},i(s(C)),11,qe),l[4]||(l[4]=e("span",{class:"fw-bold"},"Seconds",-1))]))])])])])}}});const Ke={class:"col-xl-4 col-lg-6 col-sm-12"},Ye={class:"card"},ze={class:"card-header border-0 pb-0 flex-column justify-content-center align-items-center gap-2"},xe={class:"media me-2 rounded-profile overflow-hidden"},Je=["src"],Qe={class:"d-flex flex-column justify-content-between"},We={class:"card-title fw-bold"},Xe={class:"card-body pt-0"},Ze={class:"text-white mb-2"},es={class:"ms-3 fw-bold text-primary fs-5"},ss={class:"text-white mb-2"},ts={class:"ms-3 fw-bold text-primary fs-5"},os={class:"text-white mb-2"},ns={class:"ms-3 fw-bold text-success fs-5"},as=V({__name:"CopyTradeCardComponent",props:{copyTrade:{}},setup(r){return(o,d)=>(h(),E("div",Ke,[e("div",Ye,[e("div",ze,[e("div",xe,[e("img",{alt:"image",width:"50",src:`${("config"in o?o.config:s(X)).imageHost}/icon/original/${o.copyTrade.icon}`},null,8,Je)]),e("div",Qe,[e("h2",We,i(o.copyTrade.name),1)])]),d[3]||(d[3]=e("hr",{class:"mt-2"},null,-1)),e("div",Xe,[e("ul",null,[e("li",Ze,[d[0]||(d[0]=D(" Amount: ")),e("span",es,i(("Helpers"in o?o.Helpers:s(v)).toCurrency(o.copyTrade.minAmount))+" - "+i(("Helpers"in o?o.Helpers:s(v)).toCurrency(o.copyTrade.maxAmount)),1)]),e("li",ss,[d[1]||(d[1]=D(" Daily Profit: ")),e("span",ts,i(("Helpers"in o?o.Helpers:s(v)).toCurrency(o.copyTrade.minAmount*o.copyTrade.dailyPercentageProfit/100))+" - "+i(("Helpers"in o?o.Helpers:s(v)).toCurrency(o.copyTrade.maxAmount*o.copyTrade.dailyPercentageProfit/100)),1)]),e("li",os,[d[2]||(d[2]=D(" Potential Profit: ")),e("span",ns,i(o.copyTrade.dailyPercentageProfit)+" % Daily",1)])]),ue(o.$slots,"default")])])]))}});const ls=Z("copy",()=>{const r=ee(),o=se(),d="copy",y=f([]),b=f(!1);function _(l){y.value=l}function C(l){b.value=l}async function m(){C(!1);try{const l=await F.get(`${d}`);_(l.data.data.copies)}catch(l){console.error(l),r.handlePost(l.response)}C(!0)}async function t(l){try{r.setPost(!0);const c=await F.post(`${d}/create`,l),{copy:g}=c.data.data;return _([g,...y.value]),r.handlePost(c),o.setUser(),!0}catch(c){return console.error(c),r.handlePost(c.response),!1}}return{loaded:b,copies:y,fetchAll:m,createCopy:t}}),rs=Z("copyTrade",()=>{const r=ee(),o="copy-trade",d=f([]),y=f(!1);function b(m){d.value=m}function _(m){y.value=m}async function C(){_(!1);try{const m=await F.get(`${o}`);b(m.data.data.copyTrades)}catch(m){console.error(m),r.handlePost(m.response)}_(!0)}return{loaded:y,copyTrades:d,fetchAll:C}}),is={class:"custom-tab-1"},ds={class:"tab-content"},cs={id:"available-packages",class:"tab-pane fade active show"},us={class:"row"},ps=["onClick","disabled"],ms={id:"running-packages",class:"tab-pane fade"},fs={class:"row"},ys={id:"closed-packages",class:"tab-pane fade"},bs={class:"row"},vs={key:0,class:"row mt-4"},_s={class:"text-center"},hs={class:"text-center"},Cs={class:"error-message"},gs={class:"row mt-4"},Es={class:"mb-3 col-12"},As={class:"d-flex justify-content-between"},Ts={class:"d-flex gap-2"},$s={class:"d-flex"},ws={class:"fw-bold"},Ns={class:"d-flex"},Ss={class:"fw-bold"},Ps={class:"error-message"},Ms=V({__name:"CopyTradePage",setup(r){const o=ls(),d=N(()=>o.copies),y=N(()=>o.loaded),b=se(),_=rs(),C=N(()=>_.copyTrades),m=N(()=>_.loaded);y.value||o.fetchAll();const t=N(()=>d.value.filter(n=>n.status!==u.COMPLETED)),l=N(()=>d.value.filter(n=>n.status===u.COMPLETED));m.value||_.fetchAll();const c=f(),g=f(),A=f(S.MAIN_BALANCE),j=n=>A.value=n,te=n=>c.value=n,q=f(!1),k=(n,a)=>{q.value=n,te(a)},G=f(!1),I=n=>G.value=n,T=pe({status:Q.INFO,title:"",message:"",onConfirm:()=>{}}),oe=n=>{T.status=n.status,T.title=n.title,T.message=n.message,T.onConfirm=n.onConfirm},ne=n=>{oe({status:Q.INFO,title:`You are about to invest in this trader the sum of ${v.toCurrency(g.value||0)}`,message:"Click on the confirm button to confirm this investment.",onConfirm:async()=>{I(!1),await o.createCopy(n)&&k(!1)}}),I(!0)},ae=me({account:fe().required("Account is required"),amount:ye().typeError("amount is required").min(0,"amount should not be a negative value").required("amount is required").test(function(n){if(c.value&&n<c.value.minAmount)throw this.createError({message:`Amount must be at least ${c.value.minAmount}`});if(b.user&&n>b.user[A.value])throw this.createError({message:`You do not have sufficient balance in your ${v.fromCamelToTitleCase(A.value)} Account`});return!0})});return(n,a)=>{const le=as,K=Ge,L=ve,Y=_e,re=he,ie=Ce,de=ge;return h(),E(M,null,[e("div",is,[a[6]||(a[6]=be('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#available-packages" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Available</a></li><li class="nav-item"><a href="#running-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Invested </a></li><li class="nav-item"><a href="#closed-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Closed </a></li></ul>',1)),e("div",ds,[e("div",cs,[e("div",us,[(h(!0),E(M,null,O(s(C),p=>(h(),R(le,{copyTrade:p,key:p._id},{default:P(()=>[e("button",{onClick:()=>k(!0,p),type:"button",class:w(`btn btn-outline-secondary w-100 mt-3 ${p.status===("CopyTradeStatus"in n?n.CopyTradeStatus:s(H)).ON_MAINTENANCE?"border-0":""}`),disabled:p.status===("CopyTradeStatus"in n?n.CopyTradeStatus:s(H)).ON_MAINTENANCE},i(p.status===("CopyTradeStatus"in n?n.CopyTradeStatus:s(H)).ON_MAINTENANCE?"Engine is on maintenance":"Invest"),11,ps)]),_:2},1032,["copyTrade"]))),128))])]),e("div",ms,[e("div",fs,[(h(!0),E(M,null,O(s(t),p=>(h(),R(K,{copy:p,key:p._id},null,8,["copy"]))),128))])]),e("div",ys,[e("div",bs,[(h(!0),E(M,null,O(s(l),p=>(h(),R(K,{copy:p,key:p._id},null,8,["copy"]))),128))])])])]),$(ie,{"is-open":s(q),"validation-schema":s(ae),onConfirm:ne,onClose:a[4]||(a[4]=()=>k(!1)),"confirm-btn-text":"Invest"},{default:P(({errors:p})=>{var z,x,J;return[a[13]||(a[13]=e("h3",{class:"border-bottom text-dark text-center pb-3"},"MAKE COPY",-1)),$(L,{name:"copyTradeId",value:(z=s(c))==null?void 0:z._id,type:"hidden"},null,8,["value"]),s(b).user?(h(),E("div",vs,[a[9]||(a[9]=e("label",{class:"form-label"},"Account",-1)),$(re,null,{default:P(()=>[$(Y,{onClick:a[0]||(a[0]=()=>j(s(S).MAIN_BALANCE)),selected:s(A)===s(S).MAIN_BALANCE},{default:P(()=>[a[7]||(a[7]=e("span",{class:"d-block"},"Main Balance",-1)),e("h4",_s,i(("Helpers"in n?n.Helpers:s(v)).toCurrency(s(b).user.mainBalance)),1)]),_:1},8,["selected"]),$(Y,{selected:s(A)===s(S).REFERRAL_BALANCE,onClick:a[1]||(a[1]=()=>j(s(S).REFERRAL_BALANCE))},{default:P(()=>[a[8]||(a[8]=e("span",{class:"d-block"},"Referral Balance",-1)),e("h4",hs,i(("Helpers"in n?n.Helpers:s(v)).toCurrency(s(b).user.referralBalance)),1)]),_:1},8,["selected"])]),_:1}),$(L,{name:"account",modelValue:s(A),"onUpdate:modelValue":a[2]||(a[2]=U=>W(A)?A.value=U:null),type:"hidden"},null,8,["modelValue"]),e("span",Cs,i(p.account),1)])):B("",!0),e("div",gs,[e("div",Es,[e("div",As,[a[12]||(a[12]=e("label",{class:"form-label"},"Amount",-1)),e("div",Ts,[e("div",$s,[a[10]||(a[10]=e("span",{class:""},"min: ",-1)),e("span",ws,i(" "+((x=s(c))==null?void 0:x.minAmount)),1)]),e("div",Ns,[a[11]||(a[11]=e("span",{class:""},"max: ",-1)),e("span",Ss,i(" "+((J=s(c))==null?void 0:J.maxAmount)),1)])])]),$(L,{name:"amount",type:"number",placeholder:"Amount",class:"form-control",modelValue:s(g),"onUpdate:modelValue":a[3]||(a[3]=U=>W(g)?g.value=U:null),"validate-on-input":!0},null,8,["modelValue"]),e("span",Ps,i(p.amount),1)])])]}),_:1},8,["is-open","validation-schema"]),$(de,{"is-open":s(G),status:s(T).status,title:s(T).title,message:s(T).message,onConfirm:s(T).onConfirm,onClose:a[5]||(a[5]=()=>I(!1))},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{Ms as default};
